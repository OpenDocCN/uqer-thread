# 自定义技术形态因子：方案1框架的回测方式，方案2自己写全局for循环

请问，自定义技术因子，比如连续3根K线阳线，这种需要获取前N天的组合排列的因子方式，在优矿上一般怎么写比较合适？
1，使用策略模式，优旷的自动回测，是按照每个步骤（日，分钟）来进行的，那么每次运行时，都获取前N天的数据？在进行判断？在回测框架中判断么？
2，使用代码模式，自己通过dateapi来获取近3天的数据。
第二种方式感觉比较笨拙，
但第一种方式<如何在优矿研究自定义因子：自定义因子研究帮助文档：http://uqer.datayes.com/help/stockManualV3/#自定义因子研究>，注册函数后，函数也是按照当前单步执行的，需要向前获取N天数据。

不知道各位大神有没有类似的策略，学习一下。感谢。
刚开始学习，还请大神不吝指点，感谢，感谢。